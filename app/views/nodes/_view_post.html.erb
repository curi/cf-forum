<div class="columns mt-6 is-centered">
  <div class="column">
    <nav class="panel is-link">
      <div class="panel-heading">
        <%= @node.content&.title %>
      </div>
      <div class="panel-block">
        By: <%= @node.author&.name %>
      </div>
      <div class="panel-block">
        Date: <%= @node.created_at %>
      </div>
      <div class="panel-block">
        <%= @node.content.body %>
      </div>
    </nav>
    <div class="columns is-mobile">
      <div class="column">
        <%= link_to 'Edit', edit_node_path(@node), class: "button is-gray" %>
        <%= link_to 'Reply', reply_to_node_path(:parent_id => @node.id), class: "button is-success" %>
        <%# <%= link_to 'Delete', node_path(@node), class: "button is-warning", method: :delete, data: { confirm: "Are you sure?" } %>
      </div>
      <div class="column">
      </div>
    </div>
  </div>
</div>
<% if @node.children.length > 0 %>
  <h3 class='title'>Replies:</h3>
  <h5 class='subtitle'>TOC:</h5>
  <ul class="mb-6">
    <% @node.children_rec(true).each do |r| %>
      <li> <%= link_to "##{r.id}: #{r.content.title || 'untitled'}", "##{r.id}" %> </li>
    <% end %>
  </ul>
  <% @node.children_rec.each do |r| %>
    <%= render 'view_comment_inline', node: r %>
  <% end %>
<% end %>
